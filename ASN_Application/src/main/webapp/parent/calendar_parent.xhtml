<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/main.xhtml">
	<ui:define name="content">
		<h:body>
			<ui:fragment rendered="#{sessionInfoBean.loggedIn}">
				<body class="theme-blue sidebar-mini sidebar-collapse">
					<div class="wrapper">
						<!-- =============================================== -->

						<div class="content-wrapper" style="min-height: 1126px;">
							<section class="content">

								<!-- Default box -->
								<div class="box">
									<div class="box-body">
										<div align="right" style="margin-bottom: 10px;"></div>
										<div class="ui-g">
											<div class="ui-g-12 ui-md-12 ui-lg-12">
												<h:form>
													<p:accordionPanel multiple="true"
														style="padding-left:400px;padding-right:400px">
														<p:tab title="Mittagsmenü für die aktuelle Woche">
															<h:panelGrid columns="5" layout="grid">
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(0).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(1).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(2).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(3).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(4).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>


																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(0).meal}"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(1).meal}"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(2).meal}"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(3).meal}"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(4).meal}" />

																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(0).cost}€"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(1).cost}€"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(2).cost}€"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(3).cost}€"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getCurrentWeek().get(4).cost}€" />
															</h:panelGrid>
														</p:tab>
														<p:tab title="Mittagsmenü für die kommende Woche">
															<h:panelGrid columns="5" layout="grid">
																<h:outputText
																	value="#{lunchController.getNextWeek().get(0).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>
																<h:outputText
																	value="#{lunchController.getNextWeek().get(1).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>
																<h:outputText
																	value="#{lunchController.getNextWeek().get(2).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>
																<h:outputText
																	value="#{lunchController.getNextWeek().get(3).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>
																<h:outputText
																	value="#{lunchController.getNextWeek().get(4).date}"
																	style="padding-right:60px">
																	<f:convertDateTime type="date" pattern="dd.MM." />
																</h:outputText>


																<h:outputText
																	value="#{lunchController.getNextWeek().get(0).meal}"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getNextWeek().get(1).meal}"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getNextWeek().get(2).meal}"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getNextWeek().get(3).meal}"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getNextWeek().get(4).meal}" />

																<h:outputText
																	value="#{lunchController.getNextWeek().get(0).cost}€"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getNextWeek().get(1).cost}€"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getNextWeek().get(2).cost}€"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getNextWeek().get(3).cost}€"
																	style="padding-right:60px" />
																<h:outputText
																	value="#{lunchController.getNextWeek().get(4).cost}€" />
															</h:panelGrid>
														</p:tab>
													</p:accordionPanel>
												</h:form>
											</div>
										</div>
										<h:form id="sheduleForm">
											<p:growl id="growl" showDetail="true" sticky="true" />
											<p:schedule locale="de" aspectRatio="1.5"
												style="padding-left:200px; padding-right: 200px;"
												leftHeaderTemplate="prev, today" rightHeaderTemplate="next"
												centerHeaderTemplate="month, agendaWeek, agendaDay"
												showWeekends="false" id="schedule"
												value="#{scheduleView.eventModel}" widgetVar="myschedule"
												timeZone="GMT+2">

												<p:ajax event="dateSelect" update="eventDateDetails"
													listener="#{scheduleView.onDateSelect}"
													oncomplete="PF('eventDateDialog').show();" />
												<p:ajax event="eventSelect"
													listener="#{scheduleView.onEventSelect}"
													update="eventDetails"
													oncomplete="PF('eventDialog').show();" />

											</p:schedule>

											<p:dialog widgetVar="eventDialog" header="Termine" closeOnEscape="true"
												showEffect="clip" hideEffect="clip">
												<p:messages showDetail="false" />
												<h:panelGrid id="eventDetails" columns="2">
													<p:outputLabel for="title" value="Titel:" />
													<p:outputLabel id="title"
														value="#{scheduleView.event.title}" />
													<p:outputLabel for="from" value="Beginn:" />
													<p:outputPanel id="from">#{scheduleView.event.startDate}</p:outputPanel>
													<p:outputLabel for="to" value="Ende:" />
													<p:outputPanel id="to">#{scheduleView.event.endDate}</p:outputPanel>

												</h:panelGrid>
											</p:dialog>

											<p:dialog widgetVar="eventDateDialog" header="Termine" closeOnEscape="true"
												showEffect="clip" hideEffect="clip">
												<p:messages showDetail="false" />
												<h:panelGrid id="eventDateDetails" columns="2">

													<p:outputLabel for="child" value="Kinder anmelden:" />
													<h:selectBooleanCheckbox id="child"
														disabled="#{scheduleView.meal}"
														value="#{scheduleView.child}">
														<p:ajax update="eventDateDetails" />

													</h:selectBooleanCheckbox>

													<p:outputLabel for="meal" value="Essen:" />
													<h:selectBooleanCheckbox id="meal"
														disabled="#{scheduleView.child}"
														value="#{scheduleView.meal}">
														<p:ajax update="eventDateDetails" />

													</h:selectBooleanCheckbox>
													<ui:fragment rendered="#{scheduleView.child}">
														<p:outputLabel for="advanced" value="Kinder:" />

													</ui:fragment>
													<ui:fragment rendered="#{scheduleView.child}">
														<p:selectOneListbox style="width: 210px;" id="advanced"
															value="#{scheduleView.childFirstname}" var="p"
															filter="true" filterMatchMode="contains">
															<f:selectItems
																value="#{childService.getChildrenByParentUsername(sessionInfoBean.getCurrentUserName())}"
																var="child" itemLabel="#{child.firstName}"
																itemValue="#{child.firstName}" />

															<p:column>
																<p:graphicImage
																	name="pictures/profil_pictures_children/#{child.imgName}"
																	width="32" height="32" />
															</p:column>

															<p:column>
																<h:outputText value="#{p}" />
															</p:column>
														</p:selectOneListbox>
													</ui:fragment>
													<ui:fragment rendered="#{scheduleView.child}">
														<p:outputLabel for="too" value="Uhrzeit:" />

													</ui:fragment>
													<ui:fragment rendered="#{scheduleView.child}">

														<p:calendar id="too" locale="de"
															value="#{scheduleView.event.startDate}" timeZone="GMT+2"
															pattern="dd/MM/yyyy HH:mm"
																	locale="de"/>
													</ui:fragment>
													<ui:fragment rendered="#{scheduleView.child}">
														<p:outputLabel for="advanced" value="Anmerkungen:" />
													</ui:fragment>
													<ui:fragment rendered="#{scheduleView.child}">
														<p:inputTextarea placeholder="Anmerkung" id="messageInput"
															value="#{scheduleView.description}" rows="5" cols="20"
															autoResize="false" />
													</ui:fragment>
													<ui:fragment rendered="#{scheduleView.child}">
														<p:commandButton id="addButton" value="Speichern"
															actionListener="#{scheduleView.addRegistration}" />

													</ui:fragment>

													<ui:fragment rendered="#{scheduleView.meal}">
														<p:outputLabel for="mealBox" value="Kinder:" />

													</ui:fragment>
													<ui:fragment rendered="#{scheduleView.meal}">
														<p:selectOneListbox style="width: 210px;" id="mealBox"
															value="#{lunchController.childId}" var="p" filter="true"
															filterMatchMode="contains">
															<f:selectItems
																value="#{childService.getChildrenByParentUsername(sessionInfoBean.getCurrentUserName())}"
																var="child" itemLabel="#{child.firstName}"
																itemValue="#{child.id}" />

															<p:column>
																<p:graphicImage
																	name="pictures/profil_pictures_children/#{child.imgName}"
																	width="32" height="32" />
															</p:column>

															<p:column>
																<h:outputText value="#{p}" />
															</p:column>
														</p:selectOneListbox>
													</ui:fragment>
													<ui:fragment rendered="#{scheduleView.meal}">
														<p:commandButton id="mealButton" value="Speichern"
															actionListener="#{lunchController.signUp(scheduleView.event.startDate)}"
															oncomplete="PF('eventDateDialog').hide()" />

													</ui:fragment>
												</h:panelGrid>
											</p:dialog>
										</h:form>
									</div>
								</div>
								<!-- /.box -->

							</section>
							<!-- /.content -->
						</div>
					</div>

				</body>


				<link rel="stylesheet"
					href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
			</ui:fragment>

		</h:body>
	</ui:define>
</ui:composition>
