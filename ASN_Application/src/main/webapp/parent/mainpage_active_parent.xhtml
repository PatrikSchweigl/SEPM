<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/main.xhtml">
	<ui:define name="content">
		<h:body>
			<ui:fragment rendered="#{sessionInfoBean.loggedIn}">
				<body class="theme-blue sidebar-mini sidebar-collapse">
					<div class="ui-fluid">
						<div class="wrapper">
							<!-- =============================================== -->

							<div class="content-wrapper" style="min-height: 1126px;">
								<section class="content">

									<!-- Default box -->
									<div class="box">
										<div class="box-body">

											<!-- dialog declaration -->
											<h:form id="dialogForm">
												<p:dialog id="dialogTest"
													visible="#{sessionInfoBean.hasDefaultPasswd()}"
													width="400px" closable="false" widgetVar="dialogTest"
													header="Passwort ändern" resizeable="false" modal="true">
													<h:outputText
														value="Sie müssen, um fortfahren zu können, Ihr Passwort wechseln." />
													<p:messages id="messages" showDetail="true"
														autoUpdate="true" />

													<h:panelGrid columns="2" id="matchGrid" cellpadding="5">
														<h:outputLabel for="pwd1" value="Password 1: *" />
														<p:password id="pwd1" value="#{parentController.password}"
															match="pwd2" label="Passwort:" required="true"
															feedback="true"
															requiredMessage="Kein Passwort eingegeben" />

														<h:outputLabel for="pwd2" value="Password 2: *" />
														<p:password id="pwd2" value="#{parentController.password}"
															label="Wiederholung: " required="true" />
													</h:panelGrid>
													<h:panelGrid columns="3">
														<p:commandButton
															action="#{parentController.changePassword(parentController.password)}"
															update="@all" value="Speichern" />
													</h:panelGrid>
												</p:dialog>
											</h:form>
										</div>
									</div>
									<!-- /.box -->

								</section>
								<!-- /.content -->
							</div>
						</div>
					</div>
				</body>


				<link rel="stylesheet"
					href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
			</ui:fragment>

		</h:body>
	</ui:define>
</ui:composition>