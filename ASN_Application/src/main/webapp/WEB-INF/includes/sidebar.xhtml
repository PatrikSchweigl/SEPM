<?xml version='1.0' encoding='UTF-8' ?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>

	<ui:composition>
		<ui:fragment rendered="#{sessionInfoBean.loggedIn}">
			<aside class="main-sidebar">
				<section class="sidebar">
					<ul class="sidebar-menu">
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a
								href="/employee/mainpage_employee.xhtml"> <i
									class="fa fa-home fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Startbildschirm</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a
								href="/employee/picturegalery_employee.xhtml"> <i
									class="fa fa-picture-o fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Bildergalerie</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li><a href="/employee/messageboard_employee.xhtml"> <i
									class="fa fa-sticky-note-o fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Messageboard</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a
								onclick="PF('privateMessage').show()"> <i
									class="fa fa-envelope-o fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Privatnachricht</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a
								href="/employee/children_employee.xhtml"> <i
									class="fa fa-child fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Kinder</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a
								href="/employee/calendar_employee.xhtml"> <i
									class="fa fa-calendar fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Kalender</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a onclick="PF('ownDataDialog').show()">
									<i class="fa fa-database fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Eigene Daten</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a onclick="#{scheduleView.test()}"
								href="/admin/parentspage_admin.xhtml"> <i
									class="fa fa-users fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Elternteile</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a
								href="/employee/logpage_employee.xhtml"> <i
									class="fa fa-file-archive-o fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Logdatei</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a onclick="PF('colorSettings').show()"
								href="#"> <i class="fa fa-edit fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Farbeinstellung</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('ADMIN')}">
							<li class="treeview"><a href="/admin/adminpage_admin.xhtml">
									<i class="fa fa-male fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Adminstratoren</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup
							rendered="#{sessionInfoBean.hasRole('ADMIN') or sessionInfoBean.hasRole('EMPLOYEE')}">
							<li class="treeview"><a
								href="/general/parentspage_admin.xhtml"> <i
									class="fa fa-users fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Elternteile</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('ADMIN')}">
							<li class="treeview"><a
								href="/admin/employeepage_admin.xhtml"> <i
									class="fa fa-female fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Angestellte</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('ADMIN')}">
							<li class="treeview"><a href="/admin/logpage_admin.xhtml">
									<i class="fa fa-file-archive-o fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Logdatei</span>
							</a></li>
						</h:panelGroup>
						<h:panelGroup rendered="#{sessionInfoBean.hasRole('ADMIN')}">
							<li class="treeview"><a onclick="PF('colorSettings').show()"
								href="#"> <i class="fa fa-edit fa-3x"></i> <span
									style="padding-left: 40px; font-size: 25px">Farbeinstellung</span>
							</a></li>
						</h:panelGroup>
					</ul>
				</section>
			</aside>
		</ui:fragment>
		<h:form>
			<p:dialog header="Farbeinstellung" id="colorSettings"
				widgetVar="colorSettings" modal="true" showEffect="fade"
				hideEffect="fade" resizable="false" closeOnEscape="true">
				<p:outputPanel id="parentData">

					<ul class="list-unstyled clearfix">
						<li style="float: left; width: 33.33333%; padding: 5px;"><a
							href="javascript:void(0);" data-skin="skin-green"
							class="clearfix full-opacity-hover"> <span
								style="display: block; width: 100px; float: left; height: 100px; background: #00a65a; border-radius: 20%"></span>
						</a></li>


						<li style="float: left; width: 33.33333%; padding: 5px;"><a
							href="javascript:void(0);" data-skin="skin-red"
							class="clearfix full-opacity-hover"> <span
								style="display: block; width: 100px; float: left; height: 100px; background: #dd4b39; border-radius: 20%"></span>
						</a></li>


						<li style="float: left; width: 33.33333%; padding: 5px;"><a
							href="javascript:void(0);" data-skin="skin-yellow"
							class="clearfix full-opacity-hover"> <span
								style="display: block; width: 100px; float: left; height: 100px; background: #f39c12; border-radius: 20%"></span>
						</a></li>

						<li style="float: left; width: 33.33333%; padding: 5px;"><a
							href="javascript:void(0);" data-skin="skin-purple"
							class="clearfix full-opacity-hover"> <span
								style="display: block; width: 100px; float: left; height: 100px; background: #605ca8; border-radius: 20%"></span>
						</a></li>
					</ul>
				</p:outputPanel>
			</p:dialog>

			<p:dialog header="Eigene Daten" id="ownDataDialog"
				widgetVar="ownDataDialog" modal="true" showEffect="fade"
				hideEffect="fade" resizable="false">
				<p:outputPanel id="parentDataCreate">
					<h:panelGrid columns="2">
						<p:outputLabel for="username" value="Username: " />
						<p:inputText id="username"
							value="#{sessionInfoBean.currentUserData.username}"
							disabled="true" />
						<p:outputLabel for="password" value="Password: " />
						<p:password id="password"
							value="#{sessionInfoBean.currentUserData.password}"
							disabled="true" />
					</h:panelGrid>
					<p:separator />
					<h:panelGrid columns="2">
						<p:outputLabel for="firstname" value="Firstname: " />
						<p:inputText id="firstname"
							value="#{sessionInfoBean.currentUserData.firstName}"
							disabled="true" />
						<p:outputLabel for="lastname" value="Lastname: " />
						<p:inputText id="lastname"
							value="#{sessionInfoBean.currentUserData.lastName}"
							disabled="true" />
					</h:panelGrid>
					<p:separator />
					<h:panelGrid columns="2">
						<p:outputLabel for="street" value="Street: " />
						<p:inputText id="street"
							value="#{sessionInfoBean.currentUserData.streetName}" />
						<p:outputLabel for="location" value="Location: " />
						<p:inputText id="location"
							value="#{sessionInfoBean.currentUserData.location}" />
						<p:outputLabel for="postcode" value="Postcode: " />
						<p:inputText id="postcode"
							value="#{sessionInfoBean.currentUserData.postcode}" />
					</h:panelGrid>
					<h:panelGrid columns="3">
						<p:commandButton value="Save"
							action="#{sessionInfoBean.doSaveUser()}"
							oncomplete="PF('ownDataDialog').hide()" />
						<p:commandButton value="Abort"
							onclick="PF('ownDataDialog').hide()" />
					</h:panelGrid>
				</p:outputPanel>
			</p:dialog>


		</h:form>
		<h:form>
			<p:dialog header="Privatnachricht" id="privateMessage"
				widgetVar="privateMessage" modal="false" showEffect="clip"
				hideEffect="clip" resizable="true" position="right,bottom"
				responsive="true" width="300" height="400" minimizable="true"
				minWidth="270">
				<h3>Mitarbeiter</h3>
				<div>
					<ui:repeat var="employee" value="#{employeeController.employees}">
						<h:panelGrid columns="2" style="width:50px;"
							columnClasses="logo,detail">
							<p:graphicImage name="pictures/tiger.jpg" width="32" height="32" />

							<p:commandLink value="#{employee.username}"
								action="#{privateMessageController.setUsername(employee.username)}"
								oncomplete="PF('privateMessageSend').show();PF('privateMessage').hide()">

								<h:outputText value="#{employee.username}" />
							</p:commandLink>
						</h:panelGrid>
						<hr />
					</ui:repeat>
				</div>
				<div>
					<h3>Eltern</h3>
					<ui:repeat var="parent" value="#{parentService.getAllParents()}">
						<h:panelGrid columns="2" style="width:50px;"
							columnClasses="logo,detail">
							<p:graphicImage name="pictures/tiger.jpg" width="32" height="32" />
							<p:commandLink value="#{parent.username}"
								action="#{privateMessageController.setUsername(employee.username)}"
								oncomplete="PF('privateMessageSend').show();PF('privateMessage').hide()">

								<h:outputText value="#{parent.username}" />
							</p:commandLink>
						</h:panelGrid>
						<hr />
					</ui:repeat>
				</div>
			</p:dialog>
		</h:form>
		<p:dialog header="Privatnachricht" id="privateMessageSend"
			widgetVar="privateMessageSend" modal="false" showEffect="clip"
			hideEffect="clip" resizable="true" position="right,bottom"
			responsive="true" width="400" height="500" minimizable="true"
			minWidth="350">

			<h:form id="form">


				<div>
					<p:scrollPanel style="width:370px; height:350px">

						<ui:repeat var="message"
							value="#{privateMessageController.getPrivateMessagesBySender(privateMessageController.getAuthenticatedUser().getUsername(), privateMessageController.getUsername())}">
							<div class="messageboard-item">
								<div class="messageboard-body">

									<blockquote class="triangle-border-new">
										<div>
											<p>#{message.message}</p>
										</div>
									</blockquote>

								</div>
							</div>
						</ui:repeat>
					</p:scrollPanel>

				</div>

				<div>
					<p:inputTextarea placeholder="Nachricht" id="messageInput"
						value="#{privateMessageController.privateMessage}" rows="5"
						cols="37" autoResize="false" />
					<p:separator />
					<p:commandButton value="Senden"
						action="#{privateMessageController.savePrivateMessage()}"
						update=":form" />
					<p:commandButton value="Laden"
						action="#{privateMessageController.getPrivateMessagesBySender(privateMessageController.getAuthenticatedUser().getUsername(), privateMessageController.getUsername())}"
						update=":form" />
				</div>
			</h:form>

		</p:dialog>

	</ui:composition>
</h:body>
</html>