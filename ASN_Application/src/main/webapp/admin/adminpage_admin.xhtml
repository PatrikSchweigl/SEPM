<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/main.xhtml">
	<ui:define name="content">
		<h:body>
			<ui:fragment rendered="#{sessionInfoBean.loggedIn}">
				<body class="theme-blue sidebar-mini sidebar-collapse">

					<div class="wrapper">
						<!-- =============================================== -->

						<div class="content-wrapper" style="min-height: 1126px;">
							<section class="content">

								<!-- Default box -->
								<div class="box">
									<div class="box-body">

											<div align="right" style="margin-bottom: 10px;">
												<p:commandButton oncomplete="PF('userEditDialog').show()"
													value="+ Admin" style="align-items:right;" />
											</div>
											<h:form id="userForm">
												<p:dataTable id="usersTable" var="userData"
													widgetVar="usersTable" value="#{userListController.users}"
													paginator="true" rows="10" paginatorPosition="bottom"
													paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
													rowsPerPageTemplate="10,25,50">

													<f:facet name="header">
														<p:outputPanel>
															<h:outputText value="Search all: " />
															<p:inputText id="globalFilter"
																onkeyup="PF('usersTable').filter()" style="width:150px"
																placeholder="Enter keyword" />
														</p:outputPanel>
													</f:facet>

													<f:facet name="{Exporters}"
														style="float: right; vertical-align: middle;">
														<div style="float: right; vertical-align: middle;">
															<h:commandLink>
																<p:graphicImage id="print" name="pictures/printer.png"
																	width="32" />
																<p:spacer width="10" />
																<p:tooltip for="print" value="drucken" position="top" />
																<p:printer />
															</h:commandLink>
															<h:commandLink>
																<p:graphicImage id="excel" name="pictures/excel.png"
																	width="32" />
																<p:spacer width="10" />
																<p:tooltip for="excel" value="export excel"
																	position="top" />
																<p:dataExporter type="xls" target="usersTable"
																	fileName="Admins" />
															</h:commandLink>
															<h:commandLink>
																<p:graphicImage id="pdf" name="pictures/pdf.png"
																	width="32" />
																<p:spacer width="10" />
																<p:tooltip for="pdf" value="export pdf" position="top" />
																<p:dataExporter type="pdf" target="usersTable"
																	fileName="Admins" />
															</h:commandLink>
															<h:commandLink>
																<p:graphicImage id="csv" name="pictures/csv.png"
																	width="32" />
																<p:tooltip for="csv" value="export csv" position="top" />
																<p:dataExporter type="csv" target="usersTable"
																	fileName="Admins" />
															</h:commandLink>
														</div>
													</f:facet>

													<p:column headerText="Username"
														filterBy="#{userData.username}"
														sortBy="#{userData.username}" filterStyle="display:none">
														<h:outputText value="#{userData.username}" />
													</p:column>
													<p:column headerText="First Name"
														filterBy="#{userData.firstName}"
														sortBy="#{userData.firstName}" filterStyle="display:none">
														<h:outputText value="#{userData.firstName}" />
													</p:column>
													<p:column headerText="Last Name"
														filterBy="#{userData.lastName}"
														sortBy="#{userData.lastName}" filterStyle="display:none">
														<h:outputText value="#{userData.lastName}" />
													</p:column>
													<p:column style="width:100px;text-align: center"
														exportable="false">
														<p:commandButton update=":userForm:userEditDialog"
															oncomplete="PF('userEditDialog').show()"
															icon="ui-icon-note" title="Edit">
															<f:setPropertyActionListener value="#{userData}"
																target="#{userDetailController.userData}" />
														</p:commandButton>
														<p:commandButton
															action="#{userDetailController.doDeleteUser}"
															icon="ui-icon-trash" title="Delete"
															update=":userForm:usersTable">
															<f:setPropertyActionListener value="#{userData}"
																target="#{userDetailController.userData}" />
															<p:confirm header="Confirmation"
																message="Are you sure that you want to delete this userData? You cannot undo this operation."
																icon="ui-icon-alert" />
														</p:commandButton>
													</p:column>
												</p:dataTable>


												<!-- EUserDataUser Dialog -->
												<p:dialog header="Edit User" id="userEditDialog"
													widgetVar="userEditDialog" modal="true" showEffect="fade"
													hideEffect="fade" resizable="false">
													<p:outputPanel id="userData"
														rendered="#{not empty userDetailController.userData}">
														<h:panelGrid columns="2">
															<p:outputLabel for="userName" value="Username: " />
															<p:inputText id="userName"
																value="#{userDetailController.userData.username}"
																disabled="true" />
															<p:outputLabel for="passWord" value="Password: " />
															<p:password id="passWord"
																value="#{userDetailController.userData.password}"
																disabled="true" />
														</h:panelGrid>
														<p:separator />
														<h:panelGrid columns="2">
															<p:outputLabel for="firstName" value="First Name: " />
															<p:inputText id="firstName"
																value="#{userDetailController.userData.firstName}" />
															<p:outputLabel for="firstName" value="Last Name: " />
															<p:inputText id="lastName"
																value="#{userDetailController.userData.lastName}" />
														</h:panelGrid>
														<p:separator />
														<h:panelGrid columns="3">
															<p:commandButton value="Save"
																action="#{userDetailController.doSaveUser()}"
																oncomplete="PF('userEditDialog').hide()"
																update=":userForm:usersTable" />
															<p:commandButton value="Reload"
																action="#{userDetailController.doReloadUser()}"
																update=":userForm:userData" />
															<p:commandButton value="Abort"
																onclick="PF('userEditDialog').hide()" />
														</h:panelGrid>
													</p:outputPanel>
												</p:dialog>

												<p:dialog header="Create User" id="userCreateDialog"
													widgetVar="userCreateDialog" modal="true" showEffect="fade"
													hideEffect="fade" resizable="true">
													<p:outputPanel id="userDataCreate">
														<h:panelGrid columns="2">
															<p:outputLabel for="username" value="Username: " />
															<p:inputText id="username"
																value="#{userAddController.userData.username}" />
															<p:outputLabel for="password" value="Password: " />
															<p:password id="password"
																value="#{userAddController.userData.password}" />
														</h:panelGrid>
														<p:separator />
														<h:panelGrid columns="2">
															<p:outputLabel for="firstname" value="First Name: " />
															<p:inputText id="firstname"
																value="#{userAddController.userData.firstName}" />
															<p:outputLabel for="lastname" value="Last Name: " />
															<p:inputText id="lastname"
																value="#{userAddController.userData.lastName}" />
														</h:panelGrid>
														<p:separator />
														<h:panelGrid columns="3">
															<p:commandButton value="Save"
																action="#{userAddController.doSaveUser()}"
																oncomplete="PF('userCreateDialog').hide()"
																update=":userForm" />
															<p:commandButton value="Abort"
																onclick="PF('userCreateDialog').hide()" />
														</h:panelGrid>
													</p:outputPanel>
												</p:dialog>

												<p:confirmDialog global="true" showEffect="fade"
													hideEffect="fade" width="300">
													<p:commandButton value="Yes" type="button"
														styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
													<p:commandButton value="No" type="button"
														styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
												</p:confirmDialog>

											</h:form>
										</div>
									</div>

								</section>
								<!-- /.content -->
							</div>
						</div>
				</body>


				<link rel="stylesheet"
					href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
			</ui:fragment>

		</h:body>
	</ui:define>
</ui:composition>