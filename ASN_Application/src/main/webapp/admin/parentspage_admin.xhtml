<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/main.xhtml">
	<ui:define name="content">
		<h:body>
			<ui:fragment rendered="#{sessionInfoBean.loggedIn}">
				<body class="theme-blue sidebar-mini sidebar-collapse">

					<div class="wrapper">
						<!-- =============================================== -->

						<div class="content-wrapper" style="min-height: 1126px;">
							<section class="content">

								<!-- Default box -->
								<div class="box">
									<div class="box-body">
										<div align="right" style="margin-bottom: 10px;">
											<p:commandButton oncomplete="PF('parentCreateDialog').show()"
												value="+ Parent" style="align-items:right;"></p:commandButton>
										</div>
											<h:form id="parentForm">
												<p:dataTable id="parentTable" var="parent"
													widgetVar="parentTable" value="#{parentController.parents}"
													paginator="true" rows="10" paginatorPosition="bottom"
													paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
													rowsPerPageTemplate="10,25,50">

													<f:facet name="header">
														<p:outputPanel>
															<h:outputText value="Search all: " />
															<p:inputText id="globalFilter"
																onkeyup="PF('parentTable').filter()" style="width:150px"
																placeholder="Enter keyword" />
														</p:outputPanel>
													</f:facet>

													<f:facet name="{Exporters}"
														style="float: right; vertical-align: middle;">
														<div style="float: right; vertical-align: middle;">
															<h:commandLink>
																<p:graphicImage id="print" name="pictures/extractors/printer.png"
																	width="32" />
																<p:spacer width="10" />
																<p:tooltip for="print" value="drucken" position="top" />
																<p:printer />
															</h:commandLink>
															<h:commandLink>
																<p:graphicImage id="excel" name="pictures/extractors/excel.png"
																	width="32" />
																<p:spacer width="10" />
																<p:tooltip for="excel" value="export excel"
																	position="top" />
																<p:dataExporter type="xls" target="parentTable"
																	fileName="Parents" />
															</h:commandLink>
															<h:commandLink>
																<p:graphicImage id="pdf" name="pictures/extractors/pdf.png"
																	width="32" />
																<p:spacer width="10" />
																<p:tooltip for="pdf" value="export pdf" position="top" />
																<p:dataExporter type="pdf" target="parentTable"
																	fileName="Parents" />
															</h:commandLink>
															<h:commandLink>
																<p:graphicImage id="csv" name="pictures/extractors/csv.png"
																	width="32" />
																<p:tooltip for="csv" value="export csv" position="top" />
																<p:dataExporter type="csv" target="parentTable"
																	fileName="Parents" />
															</h:commandLink>
														</div>
													</f:facet>

													<p:column headerText="Username"
														filterBy="#{parent.username}" sortBy="#{parent.username}"
														filterStyle="display:none">
														<h:outputText value="#{parent.username}" />
													</p:column>
													<p:column headerText="First Name"
														filterBy="#{parent.firstName}"
														sortBy="#{parent.firstName}" filterStyle="display:none">
														<h:outputText value="#{parent.firstName}" />
													</p:column>
													<p:column headerText="Last Name"
														filterBy="#{parent.lastName}" sortBy="#{parent.lastName}"
														filterStyle="display:none">
														<h:outputText value="#{parent.lastName}" />
													</p:column>
													<p:column headerText="Location"
														filterBy="#{parent.location}" sortBy="#{parent.location}"
														filterStyle="display:none">
														<h:outputText value="#{parent.location}" />
													</p:column>
													<p:column headerText="Status" filterBy="#{parent.status}"
														filterMatchMode="equals">
														<f:facet name="filter">
															<p:selectOneButton onchange="PF('parentTable').filter()">
																<f:converter converterId="javax.faces.Boolean" />
																<f:selectItem itemLabel="all" itemValue="" />
																<f:selectItem itemLabel="active" itemValue="true" />
																<f:selectItem itemLabel="inactive" itemValue="false" />
															</p:selectOneButton>
														</f:facet>
														<h:outputText
															value="#{parent.status ? 'active' : 'inactive'}" />
													</p:column>
													<p:column style="width:100px;text-align: center"
														exportable="false">
														<p:commandButton update=":parentForm:parentEditDialog"
															oncomplete="PF('parentEditDialog').show()"
															icon="ui-icon-note" title="Edit">
															<f:setPropertyActionListener value="#{parent}"
																target="#{parentEditController.parent}" />
														</p:commandButton>
														<p:commandButton
															action="#{parentEditController.doDeleteParent}"
															icon="ui-icon-trash" title="Delete"
															update=":parentForm:parentTable">
															<f:setPropertyActionListener value="#{parent}"
																target="#{parentEditController.parent}" />
															<p:confirm header="Confirmation"
																message="Are you sure that you want to delete this parent? You cannot undo this operation."
																icon="ui-icon-alert" />
														</p:commandButton>
													</p:column>
												</p:dataTable>


												<!-- Edit Parent Dialog -->
												<p:dialog header="Edit Parent" id="parentEditDialog"
													widgetVar="parentEditDialog" modal="true" showEffect="fade"
													hideEffect="fade" resizable="false">
													<p:outputPanel id="parentData"
														rendered="#{not empty parentEditController.parent}">
														<h:panelGrid columns="2">
															<p:outputLabel for="userName" value="Username: " />
															<p:inputText id="userName"
																value="#{parentEditController.parent.username}"
																disabled="true" />
															<p:outputLabel for="passWord" value="Password: " />
															<p:password id="passWord"
																value="#{parentEditController.parent.password}"
																disabled="true" />
														</h:panelGrid>
														<p:separator />
														<h:panelGrid columns="2">
															<p:outputLabel for="firstName" value="First Name: " />
															<p:inputText id="firstName"
																value="#{parentEditController.parent.firstName}" />
															<p:outputLabel for="firstName" value="Last Name: " />
															<p:inputText id="lastName"
																value="#{parentEditController.parent.lastName}" />
															<p:outputLabel for="location" value="Location: " />
															<p:inputText id="location"
																value="#{parentEditController.parent.location}" />
															<p:outputLabel for="street" value="Streetname: " />
															<p:inputText id="street"
																value="#{parentEditController.parent.streetName}" />
															<p:outputLabel for="postcode" value="Postcode: " />
															<p:inputText id="postcode"
																value="#{parentEditController.parent.postcode}" />
														</h:panelGrid>
														<p:separator />
														<h:panelGrid columns="6">
															<p:outputLabel for="familystatus" value="Familystatus: " />
															<p:selectOneMenu id="familystatus"
																value="#{parentEditController.parent.familyStatus}"
																style="width:150px">
																<f:selectItem itemLabel="Select Familystatus"
																	itemValue="" noSelectionOption="true" />
																<f:selectItems value="#{enumController.familyStatus}" />
															</p:selectOneMenu>
															<h:outputLabel value="Status (active/inactive): " />
															<p:selectBooleanCheckbox
																value="#{parentEditController.parent.status}" />
														</h:panelGrid>
														<h:panelGrid columns="3">
															<p:commandButton value="Save"
																action="#{parentEditController.doSaveParent()}"
																oncomplete="PF('parentEditDialog').hide()"
																update=":parentForm:parentTable" />
															<p:commandButton value="Reload"
																action="#{parentEditController.doReloadParent()}"
																update=":parentForm:parentTable" />
															<p:commandButton value="Abort"
																onclick="PF('parentEditDialog').hide()" />
														</h:panelGrid>
													</p:outputPanel>
												</p:dialog>


												<!-- Create Parent Dialog -->
												<p:dialog header="Create Parent" id="parentCreateDialog"
													widgetVar="parentCreateDialog" modal="true"
													showEffect="fade" hideEffect="fade" resizable="false">
													<p:outputPanel id="parentDataCreate">
														<h:panelGrid columns="2">
															<p:outputLabel for="username" value="Username: " />
															<p:inputText id="username"
																value="#{parentController.parent.username}" />
															<p:outputLabel for="password" value="Password: " />
															<p:password id="password"
																value="#{parentController.parent.password}" />
														</h:panelGrid>
														<p:separator />
														<h:panelGrid columns="2">
															<p:outputLabel for="firstname" value="First Name: " />
															<p:inputText id="firstname"
																value="#{parentController.parent.firstName}" />
															<p:outputLabel for="lastname" value="Last Name: " />
															<p:inputText id="lastname"
																value="#{parentController.parent.lastName}" />
															<p:outputLabel for="Location" value="Location: " />
															<p:inputText id="Location"
																value="#{parentController.parent.location}" />
															<p:outputLabel for="Street" value="Streetname: " />
															<p:inputText id="Street"
																value="#{parentController.parent.streetName}" />
															<p:outputLabel for="Postcode" value="Postcode: " />
															<p:inputText id="Postcode"
																value="#{parentController.parent.postcode}" />
														</h:panelGrid>
														<p:separator />
														<h:panelGrid columns="6">
															<p:outputLabel for="famstat" value="Familystatus: " />
															<p:selectOneMenu id="famstat"
																value="#{parentController.parent.familyStatus}"
																style="width:150px">
																<f:selectItem itemLabel="Select Familystatus"
																	itemValue="" noSelectionOption="true" />
																<f:selectItems value="#{enumController.familyStatus}" />
															</p:selectOneMenu>
															<h:outputLabel value="Status (active/inactive): " />
															<p:selectBooleanCheckbox
																value="#{parentController.parent.status}" />
														</h:panelGrid>
														<h:panelGrid columns="3">
															<p:commandButton value="Save"
																action="#{parentController.doSaveParent()}"
																oncomplete="PF('parentCreateDialog').hide()"
																update=":parentForm" />
															<p:commandButton value="Abort"
																onclick="PF('parentCreateDialog').hide()" />
														</h:panelGrid>
													</p:outputPanel>
												</p:dialog>

												<p:confirmDialog global="true" showEffect="fade"
													hideEffect="fade" width="300">
													<p:commandButton value="Yes" type="button"
														styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
													<p:commandButton value="No" type="button"
														styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
												</p:confirmDialog>

											</h:form>

										</div>
									</div>

								</section>
								<!-- /.content -->
							</div>
						</div>
				</body>


				<link rel="stylesheet"
					href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
			</ui:fragment>

		</h:body>
	</ui:define>
</ui:composition>