<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/main.xhtml">
	<ui:define name="content">
		<h:body>
			<ui:fragment rendered="#{sessionInfoBean.loggedIn}">
				<body class="theme-blue sidebar-mini sidebar-collapse">
					<div class="wrapper">
						<!-- =============================================== -->

						<div class="content-wrapper" style="min-height: 1126px;">
							<section class="content">

								<!-- Default box -->
								<div class="box">
									<div class="box-body">
										<div align="right" style="margin-bottom: 10px;">
											<h:form>
												<p:button outcome="/employee/calendar_employee.xhtml"
													value="Kalenderansicht" style="align-items:right;">
												</p:button>
											</h:form>

										</div>
										<h:form>
											<p:accordionPanel multiple="true">
												<p:tab title="Anwesende Kinder in diesem Kalenderjahr">
													<p:dataTable id="childTable" var="reg"
														value="#{registrationController.getAllRegistrationsYear()}"
														paginator="true" paginatorPosition="bottom"
														paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {Exporters}"
														 emptyMessage="Es wurden keine Kinder gefunden!">
														<f:facet name="{Exporters}"
															style="float: right; vertical-align: middle;">
															<div style="float: right; vertical-align: middle;">
																<p:commandLink ajax="false" immediate="true">
																	<p:graphicImage id="print"
																		name="pictures/extractors/printer.png" width="32" />
																	<p:spacer width="10" />
																	<p:tooltip for="print" value="Drucken" position="top" />
																	<p:printer />
																</p:commandLink>
																<p:commandLink ajax="false" immediate="true">
																	<p:graphicImage id="excel"
																		name="pictures/extractors/excel.png" width="32" />
																	<p:spacer width="10" />
																	<p:tooltip for="excel" value="Excel" position="top" />
																	<p:dataExporter type="xls" target="employeeTable"
																		fileName="Angestellte" />
																</p:commandLink>
																<p:commandLink ajax="false" immediate="true">
																	<p:graphicImage id="pdf"
																		name="pictures/extractors/pdf.png" width="32" />
																	<p:spacer width="10" />
																	<p:tooltip for="pdf" value="PDF" position="top" />
																	<p:dataExporter type="pdf" target="employeeTable"
																		fileName="Angestellte" />
																</p:commandLink>
																<p:commandLink ajax="false" immediate="true">
																	<p:graphicImage id="csv"
																		name="pictures/extractors/csv.png" width="32" />
																	<p:tooltip for="csv" value="CSV" position="top" />
																	<p:dataExporter type="csv" target="employeeTable"
																		fileName="Angestellte" />
																</p:commandLink>
															</div>
														</f:facet>
														<p:column headerText="Vorname">
															<h:outputText value="#{reg.child.firstName}" />
														</p:column>
														<p:column headerText="Nachname">
															<h:outputText value="#{reg.child.lastName}" />
														</p:column>
														<p:column headerText="Anmerkung">
															<h:outputText value="#{reg.note}" />
														</p:column>
														<p:column headerText="Tag">
															<h:outputText value="#{reg.date}" />
														</p:column>
													</p:dataTable>

												</p:tab>
												<p:tab
													title="Kinder die in diesem Kalenderjahr Essen konsumiert haben">
													<p:dataTable id="childTableEating" var="report" widgetVar="childTableEating"
														value="#{reportController.annualReport}"
														paginator="true" paginatorPosition="bottom"
														paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
														rowsPerPageTemplate="10,25,50"
														 emptyMessage="Es wurden keine Kinder gefunden, die diesen Monat am Mittagessen teilnehmen!">

														<f:facet name="header">
															<p:outputPanel>
																<h:outputText value="Suche " />
																<p:inputText id="globalFilter"
																	onkeyup="PF('childTableEating').filter()"
																	style="width:150px" placeholder="Suchwort eingeben" />
															</p:outputPanel>
														</f:facet>

														<f:facet name="{Exporters}"
															style="float: right; vertical-align: middle;">
															<div style="float: right; vertical-align: middle;">
																<p:commandLink ajax="false" immediate="true">
																	<p:graphicImage id="print2"
																		name="pictures/extractors/printer.png" width="32" />
																	<p:spacer width="10" />
																	<p:tooltip for="print2" value="Drucken" position="top" />
																	<p:printer />
																</p:commandLink>
																<p:commandLink ajax="false" immediate="true">
																	<p:graphicImage id="excel2"
																		name="pictures/extractors/excel.png" width="32" />
																	<p:spacer width="10" />
																	<p:tooltip for="excel2" value="Excel" position="top" />
																	<p:dataExporter type="xls" target="childtableEating"
																		fileName="Angestellte" />
																</p:commandLink>
																<p:commandLink ajax="false" immediate="true">
																	<p:graphicImage id="pdf2"
																		name="pictures/extractors/pdf.png" width="32" />
																	<p:spacer width="10" />
																	<p:tooltip for="pdf2" value="PDF" position="top" />
																	<p:dataExporter type="pdf" target="childtableEating"
																		fileName="Angestellte" />
																</p:commandLink>
																<p:commandLink ajax="false" immediate="true">
																	<p:graphicImage id="csv2"
																		name="pictures/extractors/csv.png" width="32" />
																	<p:tooltip for="csv2" value="CSV" position="top" />
																	<p:dataExporter type="csv" target="childtableEating"
																		fileName="Angestellte" />
																</p:commandLink>
															</div>
														</f:facet>
														<p:column headerText="Name"
															filterBy="#{report.child.firstName}"
															sortBy="#{report.child.firstName}"
															filterStyle="display:none">
															<h:outputText value="#{report.child.firstName}" />
														</p:column>
														<p:column headerText="Mittagessen"
															filterBy="#{report.lunch.meal}"
															filterStyle="display:none">
															<h:outputText value="#{report.lunch.meal}" />
														</p:column>
														<p:column headerText="Tag" filterBy="#{report.lunch.date}"
															filterStyle="display:none">
															<h:outputText value="#{report.lunch.getFormattedOriginDate()}" />
														</p:column>
														<p:column headerText="Kosten"
															filterBy="#{report.lunch.cost}"
															filterStyle="display:none">
															<h:outputText value="#{report.lunch.cost}" />
														</p:column>
														<p:summaryRow>
															<p:column colspan="3" style="text-align:right">
																<h:outputText value="Summe:" />
															</p:column>
															<p:column>
																<h:outputText value="#{reportController.getLunchCostByChild(report.child)}">
																	<f:convertNumber type="currency" currencySymbol="â‚¬" />
																</h:outputText>
															</p:column>
														</p:summaryRow>
													</p:dataTable>
												</p:tab>
											</p:accordionPanel>
										</h:form>
									</div>
								</div>
								<!-- /.box -->

							</section>
							<!-- /.content -->
						</div>
					</div>

				</body>


				<link rel="stylesheet"
					href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
			</ui:fragment>

		</h:body>
	</ui:define>
</ui:composition>
