<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:ng="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates/main.xhtml">
	<ui:define name="content">
		<h:body>
			<ui:fragment rendered="#{sessionInfoBean.loggedIn}">
				<body class="theme-blue sidebar-mini sidebar-collapse">
					<div class="wrapper">
						<!-- =============================================== -->

						<div class="content-wrapper" style="min-height: 1126px;">
							<section class="content">

								<!-- Default box -->
								<div class="box">
									<div class="box-body">
										<h:form id="sheduleForm">
										    <p:growl id="growl" showDetail="true" sticky="true" />  
											<p:schedule locale="de" aspectRatio="1.5"
												style="padding-left:200px; padding-right: 200px;"
												leftHeaderTemplate="prev, today" rightHeaderTemplate="next"
												centerHeaderTemplate="month, agendaWeek, agendaDay"
												id="schedule" value="#{scheduleView.eventModel}"
												widgetVar="myschedule" timeZone="GMT+2">

												<p:ajax event="dateSelect"
													listener="#{scheduleView.onDateSelect}"
													update="eventDetails"
													oncomplete="PF('eventDialog').show();" />
												<p:ajax event="eventSelect"
													listener="#{scheduleView.onEventSelect}"
													update="eventDetails"
													oncomplete="PF('eventDialog').show();" />
												<p:ajax event="eventMove"
													listener="#{scheduleView.onEventMove}" />
												<p:ajax event="eventResize"
													listener="#{scheduleView.onEventResize}" />

											</p:schedule>

										<p:dialog widgetVar="eventDialog" header="Termine setzen"
											showEffect="clip" hideEffect="clip">
											<p:messages showDetail="false"/>
											<h:panelGrid id="eventDetails" columns="2">
												<p:outputLabel for="title" value="Titel:" />
												<p:inputText id="title" required="true" requiredMessage="Titel fehlt"
													value="#{scheduleView.event.description}" />

												<p:outputLabel for="from" value="Beginn:" />
												<p:calendar id="from"
													value="#{scheduleView.event.startDate}" timeZone="GMT+2"
													pattern="dd/MM/yyyy HH:mm" />

												<p:outputLabel for="to" value="Ende:" />
												<p:calendar id="to" value="#{scheduleView.event.endDate}"
													timeZone="GMT+2" pattern="dd/MM/yyyy HH:mm" />

												<p:outputLabel for="allDay" value="Ganztägig:" />
												<h:selectBooleanCheckbox id="allDay"
													value="#{scheduleView.event.allDay}" />




												<ui:fragment
													rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
													<p:outputLabel for="important" value="wichtiges Ereignis:" />
												</ui:fragment>

												<ui:fragment
													rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
													<h:selectBooleanCheckbox id="important"
														value="#{scheduleView.important}">
														<p:ajax update="eventDetails" />
													</h:selectBooleanCheckbox>
												</ui:fragment>




												<ui:fragment
													rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
													<p:outputLabel for="reciever" value="Aufgabe:" />
												</ui:fragment>

												<ui:fragment
													rendered="#{sessionInfoBean.hasRole('EMPLOYEE')}">
													<h:selectBooleanCheckbox id="reciever"
														value="#{scheduleView.visible}">
														<p:ajax update="eventDetails" />
													</h:selectBooleanCheckbox>
												</ui:fragment>
												<ui:fragment
													rendered="#{sessionInfoBean.hasRole('EMPLOYEE') and scheduleView.visible}">
													<p:outputLabel for="reciever" value="Elternteil:" />
												</ui:fragment>
												<ui:fragment
													rendered="#{sessionInfoBean.hasRole('EMPLOYEE') and scheduleView.visible}">
													<p:selectOneListbox style="width: 100%;" id="advanced"
														value="#{scheduleView.reciever}" var="p" filter="true"
														filterMatchMode="contains">
														<f:selectItems value="#{parentService.getAllParents()}"
															var="parent" itemLabel="#{parent.username}"
															itemValue="#{parent.username}" />

														<p:column>
															<p:graphicImage name="pictures/tiger.jpg" width="32"
																height="32" />
														</p:column>

														<p:column>
															<h:outputText value="#{p}" />
														</p:column>
													</p:selectOneListbox>
												</ui:fragment>
												<p:commandButton id="deleteButton" value="Löschen" 
													action="#{scheduleView.deleteEvent}"/>
												<p:commandButton id="addButton" value="Speichern"
													actionListener="#{scheduleView.addEvent}"
													oncomplete="if (args &amp;&amp; !args.validationFailed) PF('eventDialog').hide()"
													/>
											</h:panelGrid>
										</p:dialog>
																				</h:form>
										
										<script type="text/javascript">
											PrimeFaces.locales['de'] = {
												closeText : 'Schliessen',
												prevText : 'Letzte',
												nextText : 'Nächste',
												currentText : 'Heute',
												monthNames : [ 'Januar',
														'Februar', 'März',
														'April', 'Mai', 'Juni',
														'Juli', 'August',
														'September', 'Oktober',
														'November', 'Dezember' ],
												monthNamesShort : [ 'Jan',
														'Feb', 'Mar', 'Apr',
														'Mai', 'Jun', 'Jul',
														'Aug', 'Sep', 'Okt',
														'Nov', 'Dez' ],
												dayNames : [ 'Montag',
														'Dienstag', 'Mittwoch',
														'Donnerstag',
														'Freitag', 'Samstag',
														'Sonntag' ],
												dayNamesShort : [ 'Mo', 'Di',
														'Mi', 'Do', 'Fr', 'Sa',
														'So' ],
												dayNamesMin : [ 'Mo', 'Di',
														'Mi', 'Do', 'Fr', 'Sa',
														'So' ],
												weekHeader : 'KW',
												firstDay : 0,
												isRTL : false,
												showMonthAfterYear : false,
												yearSuffix : '',
												month : 'Monat',
												week : 'Woche',
												day : 'Tag',
												allDayText : 'Ganzer Tag'
											};
										</script>
									</div>
								</div>
								<!-- /.box -->

							</section>
							<!-- /.content -->
						</div>
					</div>

				</body>


				<link rel="stylesheet"
					href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
			</ui:fragment>

		</h:body>
	</ui:define>
</ui:composition>
